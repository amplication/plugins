# @amplication/plugin-cache-redis

[![NPM Downloads](https://img.shields.io/npm/dt/@amplication/plugin-auth-basic)](https://www.npmjs.com/package/@amplication/plugin-auth-basic)

Use a Redis cache in the service generated by Amplication.

## Purpose

This plugin adds the required code to use Redis as a cache in the service generated by Amplication.

It updates the following parts:
- Adds the required dependencies to `package.json`.
- Adds the required environment variables to `.env`.
- Adds the `CacheModule` configured to use Redis to the `app.module.ts` module imports list.
- Adds the required service to the `docker-compose.yml` file.

## Configuration

The `host` setting is the host of the Redis server. 

The `port` setting is the port on which the Redis server is accepting connections.

The `ttl` setting is the Time To Live for cached values.

The `max` setting is the maximum amount of requests that can be cached at once.

The `username` setting is the username used to connect to the server.

The `password` setting is the password used to connect to the server.

If no configuration is provided the .amplicationrc.json file will use be used as the default values.

```json
{
    "host": "localhost",
    "port": 6379,
    "ttl": 5,
    "max": 100,
    "username": null,
    "password": null
}
```

## Scripts

### `build`

Running `npm run build` will bundle your plugin with Webpack for production.

### `dev`

Running `npm run dev` will watch your plugin's source code and automatically bundle it with every change.

### `test`

Running `npm run test` will run the plugin's test suite.

## Usage

This plugin provides you with a Redis cache module that you can use in your service as described here: https://docs.nestjs.com/techniques/caching#interacting-with-the-cache-store.

To configure, set the following environment variables:

REDIS_HOST - The host on which the Redis server is running.

REDIS_PORT - The port on which the Redis server is listening.

REDIS_TTL - The Time To Live for cached requests on the Redis server.

REDIS_MAX_REQUESTS_CACHED - The largest amount of requests that can be cached at once.

REDIS_USERNAME - The username to be used to connect to the Redis server.

REDIS_PASSWORD - The password to be used to connect to the Redis server.
